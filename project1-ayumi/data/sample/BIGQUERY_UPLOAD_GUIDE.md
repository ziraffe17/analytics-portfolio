# BigQueryã¸ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ‰‹é †æ›¸

## ğŸ“‹ æ¦‚è¦
ç”Ÿæˆã—ãŸã‚ã‚†ã¿SaaSã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’BigQueryã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ‰‹é †ã§ã™ã€‚

---

## ğŸ¯ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

1. **ayumi_users.csv** (25è¡Œ) - åˆ©ç”¨è€…ãƒã‚¹ã‚¿
2. **ayumi_staffs.csv** (5è¡Œ) - ã‚¹ã‚¿ãƒƒãƒ•ãƒã‚¹ã‚¿
3. **ayumi_attendance_records.csv** (1,650è¡Œ) - å‡ºå¸­è¨˜éŒ²
4. **ayumi_daily_reports_morning.csv** (1,449è¡Œ) - æœæ—¥å ±
5. **ayumi_daily_reports_evening.csv** (1,449è¡Œ) - å¤•æ—¥å ±

---

## ğŸ“ BigQueryè¨­å®š

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±
- **Project ID**: `mystic-now-474722-r4`
- **Datasetå**: `ayumi_analytics`
- **Location**: `asia-northeast1` (æ±äº¬)

---

## ğŸš€ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ‰‹é †

### Step 1: BigQueryã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆ

1. BigQueryã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹
   - https://console.cloud.google.com/bigquery

2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ `mystic-now-474722-r4` ã‚’é¸æŠ

3. ã€Œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

4. è¨­å®š:
   ```
   ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆID: ayumi_analytics
   ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³: asia-northeast1 (Tokyo)
   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®æœ‰åŠ¹æœŸé™: ãªã—
   ```

5. ã€Œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

### Step 2: ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆï¼ˆ5å›ç¹°ã‚Šè¿”ã™ï¼‰

#### 2-1. usersãƒ†ãƒ¼ãƒ–ãƒ«

1. `ayumi_analytics` ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’é¸æŠ

2. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

3. è¨­å®š:
   ```
   ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆå…ƒ: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ: ayumi_users.csv
   ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: CSV
   
   ãƒ†ãƒ¼ãƒ–ãƒ«å: users
   ã‚¹ã‚­ãƒ¼ãƒ: è‡ªå‹•æ¤œå‡º âœ…
   è©³ç´°ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
     - ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—: 1
     - ä¸æ˜ãªå€¤: NULLå€¤ã¨ã—ã¦è¨±å¯
   ```

4. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

#### 2-2. staffsãƒ†ãƒ¼ãƒ–ãƒ«

1. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. è¨­å®š:
   ```
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ: ayumi_staffs.csv
   ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: CSV
   
   ãƒ†ãƒ¼ãƒ–ãƒ«å: staffs
   ã‚¹ã‚­ãƒ¼ãƒ: è‡ªå‹•æ¤œå‡º âœ…
   ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—: 1
   ```

3. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

#### 2-3. attendance_recordsãƒ†ãƒ¼ãƒ–ãƒ«

1. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. è¨­å®š:
   ```
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ: ayumi_attendance_records.csv
   ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: CSV
   
   ãƒ†ãƒ¼ãƒ–ãƒ«å: attendance_records
   ã‚¹ã‚­ãƒ¼ãƒ: è‡ªå‹•æ¤œå‡º âœ…
   ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—: 1
   ```

3. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

#### 2-4. daily_reports_morningãƒ†ãƒ¼ãƒ–ãƒ«

1. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. è¨­å®š:
   ```
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ: ayumi_daily_reports_morning.csv
   ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: CSV
   
   ãƒ†ãƒ¼ãƒ–ãƒ«å: daily_reports_morning
   ã‚¹ã‚­ãƒ¼ãƒ: è‡ªå‹•æ¤œå‡º âœ…
   ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—: 1
   ```

3. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

#### 2-5. daily_reports_eveningãƒ†ãƒ¼ãƒ–ãƒ«

1. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

2. è¨­å®š:
   ```
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ: ayumi_daily_reports_evening.csv
   ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: CSV
   
   ãƒ†ãƒ¼ãƒ–ãƒ«å: daily_reports_evening
   ã‚¹ã‚­ãƒ¼ãƒ: è‡ªå‹•æ¤œå‡º âœ…
   ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—: 1
   ```

3. ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## âœ… ç¢ºèª

ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾Œã€ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã§ç¢ºèª:

```sql
-- ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå…¨ä½“ã®ç¢ºèª
SELECT 
  table_name,
  row_count,
  size_bytes / 1024 / 1024 AS size_mb
FROM `mystic-now-474722-r4.ayumi_analytics.__TABLES__`
ORDER BY table_name;
```

æœŸå¾…ã•ã‚Œã‚‹çµæœ:
```
table_name                  | row_count | size_mb
----------------------------|-----------|----------
attendance_records          | 1650      | ~0.17
daily_reports_evening       | 1449      | ~0.26
daily_reports_morning       | 1449      | ~0.12
staffs                      | 5         | ~0.001
users                       | 25        | ~0.003
```

---

## ğŸ§ª ãƒ‡ãƒ¼ã‚¿ç¢ºèªã‚¯ã‚¨ãƒª

### 1. åˆ©ç”¨è€…ä¸€è¦§
```sql
SELECT id, name, login_code, start_date, is_active
FROM `mystic-now-474722-r4.ayumi_analytics.users`
ORDER BY id
LIMIT 10;
```

### 2. å‡ºå¸­çµ±è¨ˆ
```sql
SELECT 
  attendance_type,
  COUNT(*) as count,
  ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) as percentage
FROM `mystic-now-474722-r4.ayumi_analytics.attendance_records`
GROUP BY attendance_type
ORDER BY count DESC;
```

### 3. æœæ—¥å ±çµ±è¨ˆ
```sql
SELECT 
  ROUND(AVG(sleep_minutes) / 60, 2) as avg_sleep_hours,
  ROUND(AVG(mood_score), 2) as avg_mood_score,
  ROUND(AVG(stress_rating), 2) as avg_stress_rating
FROM `mystic-now-474722-r4.ayumi_analytics.daily_reports_morning`;
```

---

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾Œ:

1. âœ… Task41å®Œäº†ãƒã‚§ãƒƒã‚¯
2. â¬œ Task42: dbt Cloudé–‹ç™ºç’°å¢ƒè¨­å®š
3. â¬œ Task43: dbtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ä½œæˆ
4. â¬œ Week 2: dbtå®Ÿè£…é–‹å§‹

---

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ22æ—¥
